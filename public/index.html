<!DOCTYPE html>
<html lang="en" data-scroll-direction="%REACT_APP_SCROLL_DIRECTION%">
  <head>
    <meta charset="utf-8" />

    <link rel="icon" href="/favicon.ico" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="stylesheet" href="/reset.min.css" />

    <title>__APP_TITLE__</title>

    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <link rel="icon" href="/favicon-32x32.png" type="image/png" sizes="32x32" />
    <link rel="icon" href="/favicon-16x16.png" type="image/png" sizes="16x16" />
    <link rel="manifest" href="/site.webmanifest" />
    <meta name="theme-color" content="#0000FF" media="(prefers-color-scheme: light)" />
    <meta name="theme-color" content="#0000FF" media="(prefers-color-scheme: dark)" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <script>
      window.PUBLIC_URL = window.location.origin;
      
      // Check for MEDIA_API_URL in order of precedence:
      // 1. Caddy runtime replacement (__MEDIA_API_URL__)
      // 2. Build-time React env var (%REACT_APP_MEDIA_API_URL%)
      // 3. Default to same origin
      var caddyApiUrl = "__MEDIA_API_URL__";
      var reactApiUrl = "%REACT_APP_MEDIA_API_URL%";
      
      if (caddyApiUrl && !caddyApiUrl.startsWith("__MEDIA_API_URL")) {
        window.MEDIA_API_URL = caddyApiUrl;
      } else if (reactApiUrl && !reactApiUrl.startsWith("%REACT")) {
        window.MEDIA_API_URL = reactApiUrl;
      } else {
        window.MEDIA_API_URL = window.location.origin;
      }
      
      window.USE_SECRET = "__USE_SECRET__".startsWith("__") ? false : __USE_SECRET__;
      window.USE_CUSTOM_SKIN = "__USE_CUSTOM_SKIN__".startsWith("__") ? false : __USE_CUSTOM_SKIN__;
      window.AUTOPLAY_ENABLED = "__AUTOPLAY_ENABLED__".startsWith("__") ? false : __AUTOPLAY_ENABLED__;
      window.PROGRESS_BAR_POSITION = "__PROGRESS_BAR_POSITION__".startsWith("__") ? "bottom" : "__PROGRESS_BAR_POSITION__";
      window.IGNORE_HIDDEN_PATHS = "__IGNORE_HIDDEN_PATHS__".startsWith("__") ? false : __IGNORE_HIDDEN_PATHS__;
      
      if (window.location.protocol === "https:")
        window.PUBLIC_URL = window.PUBLIC_URL.replace("http:", "https:");
    </script>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="app"></div>
  </body>
</html>
